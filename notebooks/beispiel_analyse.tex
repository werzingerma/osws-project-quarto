% Options for packages loaded elsewhere
% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
  letterpaper,
  DIV=11,
  numbers=noendperiod]{scrartcl}
\usepackage{xcolor}
\usepackage{amsmath,amssymb}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
% Make \paragraph and \subparagraph free-standing
\makeatletter
\ifx\paragraph\undefined\else
  \let\oldparagraph\paragraph
  \renewcommand{\paragraph}{
    \@ifstar
      \xxxParagraphStar
      \xxxParagraphNoStar
  }
  \newcommand{\xxxParagraphStar}[1]{\oldparagraph*{#1}\mbox{}}
  \newcommand{\xxxParagraphNoStar}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
  \let\oldsubparagraph\subparagraph
  \renewcommand{\subparagraph}{
    \@ifstar
      \xxxSubParagraphStar
      \xxxSubParagraphNoStar
  }
  \newcommand{\xxxSubParagraphStar}[1]{\oldsubparagraph*{#1}\mbox{}}
  \newcommand{\xxxSubParagraphNoStar}[1]{\oldsubparagraph{#1}\mbox{}}
\fi
\makeatother

\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{241,243,245}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.40,0.45,0.13}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\BuiltInTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\ExtensionTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.28,0.35,0.67}{#1}}
\newcommand{\ImportTok}[1]{\textcolor[rgb]{0.00,0.46,0.62}{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.68,0.00,0.00}{#1}}
\newcommand{\RegionMarkerTok}[1]{\textcolor[rgb]{0.00,0.23,0.31}{#1}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.07,0.07,0.07}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.13,0.47,0.30}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.37,0.37,0.37}{\textit{#1}}}

\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\newsavebox\pandoc@box
\newcommand*\pandocbounded[1]{% scales image to fit in text height/width
  \sbox\pandoc@box{#1}%
  \Gscale@div\@tempa{\textheight}{\dimexpr\ht\pandoc@box+\dp\pandoc@box\relax}%
  \Gscale@div\@tempb{\linewidth}{\wd\pandoc@box}%
  \ifdim\@tempb\p@<\@tempa\p@\let\@tempa\@tempb\fi% select the smaller of both
  \ifdim\@tempa\p@<\p@\scalebox{\@tempa}{\usebox\pandoc@box}%
  \else\usebox{\pandoc@box}%
  \fi%
}
% Set default figure placement to htbp
\def\fps@figure{htbp}
\makeatother





\setlength{\emergencystretch}{3em} % prevent overfull lines

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}



 


\KOMAoption{captions}{tableheading}
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\AtBeginDocument{%
\ifdefined\contentsname
  \renewcommand*\contentsname{Table of contents}
\else
  \newcommand\contentsname{Table of contents}
\fi
\ifdefined\listfigurename
  \renewcommand*\listfigurename{List of Figures}
\else
  \newcommand\listfigurename{List of Figures}
\fi
\ifdefined\listtablename
  \renewcommand*\listtablename{List of Tables}
\else
  \newcommand\listtablename{List of Tables}
\fi
\ifdefined\figurename
  \renewcommand*\figurename{Figure}
\else
  \newcommand\figurename{Figure}
\fi
\ifdefined\tablename
  \renewcommand*\tablename{Table}
\else
  \newcommand\tablename{Table}
\fi
}
\@ifpackageloaded{float}{}{\usepackage{float}}
\floatstyle{ruled}
\@ifundefined{c@chapter}{\newfloat{codelisting}{h}{lop}}{\newfloat{codelisting}{h}{lop}[chapter]}
\floatname{codelisting}{Listing}
\newcommand*\listoflistings{\listof{codelisting}{List of Listings}}
\makeatother
\makeatletter
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\@ifpackageloaded{subcaption}{}{\usepackage{subcaption}}
\makeatother
\usepackage{bookmark}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  pdftitle={Beispiel-Analyse},
  pdfauthor={PRECISION Team},
  colorlinks=true,
  linkcolor={blue},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={Blue},
  pdfcreator={LaTeX via pandoc}}


\title{Beispiel-Analyse}
\usepackage{etoolbox}
\makeatletter
\providecommand{\subtitle}[1]{% add subtitle to \maketitle
  \apptocmd{\@title}{\par {\large #1 \par}}{}{}
}
\makeatother
\subtitle{Datenexploration, Statistik \& Visualisierung}
\author{PRECISION Team}
\date{2024-12-24}
\begin{document}
\maketitle


---title: ``Beispiel-Analyse''subtitle: ``Datenexploration, Statistik \&
Visualisierung''author: ``PRECISION Team''date: 2024-12-24description:
``Vollständiges Beispiel-Notebook mit Exploration, statistischen Tests
und publikationsreifen Grafiken''categories: {[}Exploration, Statistik,
Visualisierung{]}format: html: code-fold: true pdf: keep-tex:
trueexecute: warning: false message: false---

\subsection{Einleitung}\label{einleitung}

Dieses Notebook demonstriert einen vollständigen Analyse-Workflow für
das PRECISION-Projekt:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{Datenexploration} - Daten laden und erste Übersicht
\item
  \textbf{Statistische Analysen} - Tests und Modelle
\item
  \textbf{Visualisierungen} - Publikationsreife Grafiken
\end{enumerate}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Imports}
\ImportTok{import}\NormalTok{ pandas }\ImportTok{as}\NormalTok{ pd}
\ImportTok{import}\NormalTok{ numpy }\ImportTok{as}\NormalTok{ np}
\ImportTok{import}\NormalTok{ matplotlib.pyplot }\ImportTok{as}\NormalTok{ plt}
\ImportTok{import}\NormalTok{ seaborn }\ImportTok{as}\NormalTok{ sns}
\ImportTok{from}\NormalTok{ scipy }\ImportTok{import}\NormalTok{ stats}
\ImportTok{from}\NormalTok{ scipy.stats }\ImportTok{import}\NormalTok{ chi2\_contingency, ttest\_ind, f\_oneway}
\ImportTok{from}\NormalTok{ sklearn.linear\_model }\ImportTok{import}\NormalTok{ LogisticRegression}
\ImportTok{from}\NormalTok{ sklearn.preprocessing }\ImportTok{import}\NormalTok{ StandardScaler}
\ImportTok{from}\NormalTok{ sklearn.model\_selection }\ImportTok{import}\NormalTok{ cross\_val\_score}
\ImportTok{from}\NormalTok{ matplotlib.patches }\ImportTok{import}\NormalTok{ Patch}
\ImportTok{import}\NormalTok{ warnings}
\NormalTok{warnings.filterwarnings(}\StringTok{\textquotesingle{}ignore\textquotesingle{}}\NormalTok{)}

\CommentTok{\# PRECISION Farbpalette}
\NormalTok{PRECISION\_COLORS }\OperatorTok{=}\NormalTok{ \{}
    \StringTok{\textquotesingle{}primary\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}\#005a8c\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}secondary\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}\#007cb0\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}accent\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}\#00a0d2\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}success\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}\#4a9b5e\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}warning\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}\#e8a027\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}danger\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}\#c9302c\textquotesingle{}}
\NormalTok{\}}

\CommentTok{\# Plotting{-}Einstellungen}
\NormalTok{plt.style.use(}\StringTok{\textquotesingle{}seaborn{-}v0\_8{-}whitegrid\textquotesingle{}}\NormalTok{)}
\NormalTok{plt.rcParams.update(\{}
    \StringTok{\textquotesingle{}figure.figsize\textquotesingle{}}\NormalTok{: (}\DecValTok{10}\NormalTok{, }\DecValTok{6}\NormalTok{),}
    \StringTok{\textquotesingle{}figure.dpi\textquotesingle{}}\NormalTok{: }\DecValTok{150}\NormalTok{,}
    \StringTok{\textquotesingle{}font.size\textquotesingle{}}\NormalTok{: }\DecValTok{11}\NormalTok{,}
    \StringTok{\textquotesingle{}axes.titlesize\textquotesingle{}}\NormalTok{: }\DecValTok{14}\NormalTok{,}
    \StringTok{\textquotesingle{}axes.titleweight\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}bold\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}axes.spines.top\textquotesingle{}}\NormalTok{: }\VariableTok{False}\NormalTok{,}
    \StringTok{\textquotesingle{}axes.spines.right\textquotesingle{}}\NormalTok{: }\VariableTok{False}
\NormalTok{\})}

\BuiltInTok{print}\NormalTok{(}\StringTok{\textquotesingle{}Setup erfolgreich!\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Setup erfolgreich!
\end{verbatim}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{Teil 1: Datenexploration}\label{teil-1-datenexploration}

\subsection{1.1 Daten laden}\label{daten-laden}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Seed für Reproduzierbarkeit}
\NormalTok{np.random.seed(}\DecValTok{42}\NormalTok{)}

\CommentTok{\# Synthetische Patientendaten erstellen}
\NormalTok{n\_patients }\OperatorTok{=} \DecValTok{200}

\NormalTok{data }\OperatorTok{=}\NormalTok{ \{}
    \StringTok{\textquotesingle{}patient\_id\textquotesingle{}}\NormalTok{: [}\SpecialStringTok{f\textquotesingle{}PAT\_}\SpecialCharTok{\{}\NormalTok{i}\SpecialCharTok{:04d\}}\SpecialStringTok{\textquotesingle{}} \ControlFlowTok{for}\NormalTok{ i }\KeywordTok{in} \BuiltInTok{range}\NormalTok{(}\DecValTok{1}\NormalTok{, n\_patients }\OperatorTok{+} \DecValTok{1}\NormalTok{)],}
    \StringTok{\textquotesingle{}age\textquotesingle{}}\NormalTok{: np.random.normal(}\DecValTok{55}\NormalTok{, }\DecValTok{15}\NormalTok{, n\_patients).astype(}\BuiltInTok{int}\NormalTok{).clip(}\DecValTok{18}\NormalTok{, }\DecValTok{90}\NormalTok{),}
    \StringTok{\textquotesingle{}gender\textquotesingle{}}\NormalTok{: np.random.choice([}\StringTok{\textquotesingle{}M\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}F\textquotesingle{}}\NormalTok{], n\_patients, p}\OperatorTok{=}\NormalTok{[}\FloatTok{0.52}\NormalTok{, }\FloatTok{0.48}\NormalTok{]),}
    \StringTok{\textquotesingle{}bmi\textquotesingle{}}\NormalTok{: np.random.normal(}\DecValTok{26}\NormalTok{, }\DecValTok{5}\NormalTok{, n\_patients).}\BuiltInTok{round}\NormalTok{(}\DecValTok{1}\NormalTok{).clip(}\DecValTok{15}\NormalTok{, }\DecValTok{45}\NormalTok{),}
    \StringTok{\textquotesingle{}blood\_pressure\_sys\textquotesingle{}}\NormalTok{: np.random.normal(}\DecValTok{130}\NormalTok{, }\DecValTok{20}\NormalTok{, n\_patients).astype(}\BuiltInTok{int}\NormalTok{).clip(}\DecValTok{90}\NormalTok{, }\DecValTok{200}\NormalTok{),}
    \StringTok{\textquotesingle{}blood\_pressure\_dia\textquotesingle{}}\NormalTok{: np.random.normal(}\DecValTok{80}\NormalTok{, }\DecValTok{12}\NormalTok{, n\_patients).astype(}\BuiltInTok{int}\NormalTok{).clip(}\DecValTok{50}\NormalTok{, }\DecValTok{120}\NormalTok{),}
    \StringTok{\textquotesingle{}cholesterol\textquotesingle{}}\NormalTok{: np.random.normal(}\DecValTok{200}\NormalTok{, }\DecValTok{40}\NormalTok{, n\_patients).}\BuiltInTok{round}\NormalTok{(}\DecValTok{0}\NormalTok{).clip(}\DecValTok{100}\NormalTok{, }\DecValTok{350}\NormalTok{),}
    \StringTok{\textquotesingle{}glucose\textquotesingle{}}\NormalTok{: np.random.normal(}\DecValTok{100}\NormalTok{, }\DecValTok{25}\NormalTok{, n\_patients).}\BuiltInTok{round}\NormalTok{(}\DecValTok{0}\NormalTok{).clip(}\DecValTok{60}\NormalTok{, }\DecValTok{250}\NormalTok{),}
    \StringTok{\textquotesingle{}treatment\_group\textquotesingle{}}\NormalTok{: np.random.choice([}\StringTok{\textquotesingle{}A\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}B\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Placebo\textquotesingle{}}\NormalTok{], n\_patients, p}\OperatorTok{=}\NormalTok{[}\FloatTok{0.4}\NormalTok{, }\FloatTok{0.4}\NormalTok{, }\FloatTok{0.2}\NormalTok{]),}
    \StringTok{\textquotesingle{}response\textquotesingle{}}\NormalTok{: np.random.choice([}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{], n\_patients, p}\OperatorTok{=}\NormalTok{[}\FloatTok{0.35}\NormalTok{, }\FloatTok{0.65}\NormalTok{])}
\NormalTok{\}}

\NormalTok{df }\OperatorTok{=}\NormalTok{ pd.DataFrame(data)}
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f\textquotesingle{}Datensatz erstellt: }\SpecialCharTok{\{}\BuiltInTok{len}\NormalTok{(df)}\SpecialCharTok{\}}\SpecialStringTok{ Patienten\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Datensatz erstellt: 200 Patienten
\end{verbatim}

\subsection{1.2 Datenübersicht}\label{datenuxfcbersicht}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Erste Zeilen anzeigen}
\NormalTok{df.head(}\DecValTok{10}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lllllllllll@{}}
\toprule\noalign{}
& patient\_id & age & gender & bmi & blood\_pressure\_sys &
blood\_pressure\_dia & cholesterol & glucose & treatment\_group &
response \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
0 & PAT\_0001 & 62 & F & 25.5 & 147 & 110 & 208.0 & 65.0 & A & 1 \\
1 & PAT\_0002 & 52 & F & 28.0 & 123 & 78 & 228.0 & 60.0 & B & 1 \\
2 & PAT\_0003 & 64 & F & 29.5 & 154 & 93 & 196.0 & 126.0 & B & 0 \\
3 & PAT\_0004 & 77 & F & 24.0 & 121 & 71 & 258.0 & 161.0 & Placebo &
1 \\
4 & PAT\_0005 & 51 & M & 27.1 & 90 & 79 & 173.0 & 135.0 & A & 1 \\
5 & PAT\_0006 & 51 & M & 26.1 & 109 & 101 & 272.0 & 114.0 & B & 1 \\
6 & PAT\_0007 & 78 & F & 26.5 & 92 & 72 & 198.0 & 115.0 & A & 1 \\
7 & PAT\_0008 & 66 & F & 22.1 & 122 & 101 & 143.0 & 121.0 & A & 1 \\
8 & PAT\_0009 & 47 & F & 26.1 & 130 & 88 & 205.0 & 119.0 & B & 0 \\
9 & PAT\_0010 & 63 & F & 28.5 & 163 & 73 & 173.0 & 107.0 & B & 1 \\
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Statistische Zusammenfassung}
\NormalTok{df.describe()}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}llllllll@{}}
\toprule\noalign{}
& age & bmi & blood\_pressure\_sys & blood\_pressure\_dia & cholesterol
& glucose & response \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
count & 200.000000 & 200.000000 & 200.000000 & 200.000000 & 200.000000 &
200.000000 & 200.000000 \\
mean & 53.875000 & 25.774500 & 128.965000 & 81.775000 & 204.770000 &
99.925000 & 0.640000 \\
std & 13.822252 & 5.037637 & 20.074078 & 11.163219 & 41.046451 &
23.566209 & 0.481205 \\
min & 18.000000 & 15.000000 & 90.000000 & 53.000000 & 100.000000 &
60.000000 & 0.000000 \\
25\% & 44.000000 & 22.175000 & 114.750000 & 73.000000 & 179.750000 &
82.000000 & 0.000000 \\
50\% & 54.500000 & 25.700000 & 129.000000 & 82.000000 & 205.000000 &
100.500000 & 1.000000 \\
75\% & 62.000000 & 28.950000 & 143.000000 & 88.000000 & 234.000000 &
114.000000 & 1.000000 \\
max & 90.000000 & 41.400000 & 182.000000 & 110.000000 & 296.000000 &
164.000000 & 1.000000 \\
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Datentypen und fehlende Werte}
\BuiltInTok{print}\NormalTok{(}\StringTok{\textquotesingle{}Datentypen:\textquotesingle{}}\NormalTok{)}
\BuiltInTok{print}\NormalTok{(df.dtypes)}
\BuiltInTok{print}\NormalTok{(}\StringTok{\textquotesingle{}}\CharTok{\textbackslash{}n}\StringTok{Fehlende Werte:\textquotesingle{}}\NormalTok{)}
\BuiltInTok{print}\NormalTok{(df.isnull().}\BuiltInTok{sum}\NormalTok{())}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Datentypen:
patient_id             object
age                     int64
gender                 object
bmi                   float64
blood_pressure_sys      int64
blood_pressure_dia      int64
cholesterol           float64
glucose               float64
treatment_group        object
response                int64
dtype: object

Fehlende Werte:
patient_id            0
age                   0
gender                0
bmi                   0
blood_pressure_sys    0
blood_pressure_dia    0
cholesterol           0
glucose               0
treatment_group       0
response              0
dtype: int64
\end{verbatim}

\subsection{1.3 Erste Visualisierungen}\label{erste-visualisierungen}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fig, ax }\OperatorTok{=}\NormalTok{ plt.subplots(figsize}\OperatorTok{=}\NormalTok{(}\DecValTok{10}\NormalTok{, }\DecValTok{6}\NormalTok{))}

\ControlFlowTok{for}\NormalTok{ gender, color }\KeywordTok{in}\NormalTok{ [(}\StringTok{\textquotesingle{}M\textquotesingle{}}\NormalTok{, PRECISION\_COLORS[}\StringTok{\textquotesingle{}primary\textquotesingle{}}\NormalTok{]), (}\StringTok{\textquotesingle{}F\textquotesingle{}}\NormalTok{, PRECISION\_COLORS[}\StringTok{\textquotesingle{}accent\textquotesingle{}}\NormalTok{])]:}
\NormalTok{    subset }\OperatorTok{=}\NormalTok{ df[df[}\StringTok{\textquotesingle{}gender\textquotesingle{}}\NormalTok{] }\OperatorTok{==}\NormalTok{ gender]}
\NormalTok{    ax.hist(subset[}\StringTok{\textquotesingle{}age\textquotesingle{}}\NormalTok{], bins}\OperatorTok{=}\DecValTok{20}\NormalTok{, alpha}\OperatorTok{=}\FloatTok{0.6}\NormalTok{, label}\OperatorTok{=}\SpecialStringTok{f\textquotesingle{}}\SpecialCharTok{\{}\NormalTok{gender}\SpecialCharTok{\}}\SpecialStringTok{ (n=}\SpecialCharTok{\{}\BuiltInTok{len}\NormalTok{(subset)}\SpecialCharTok{\}}\SpecialStringTok{)\textquotesingle{}}\NormalTok{, color}\OperatorTok{=}\NormalTok{color)}

\NormalTok{ax.set\_xlabel(}\StringTok{\textquotesingle{}Alter (Jahre)\textquotesingle{}}\NormalTok{)}
\NormalTok{ax.set\_ylabel(}\StringTok{\textquotesingle{}Anzahl Patienten\textquotesingle{}}\NormalTok{)}
\NormalTok{ax.set\_title(}\StringTok{\textquotesingle{}Altersverteilung nach Geschlecht\textquotesingle{}}\NormalTok{)}
\NormalTok{ax.legend()}
\NormalTok{plt.tight\_layout()}
\NormalTok{plt.show()}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]

\centering{

\pandocbounded{\includegraphics[keepaspectratio]{beispiel_analyse_files/figure-pdf/fig-age-distribution-output-1.png}}

}

\caption{\label{fig-age-distribution}Altersverteilung nach Geschlecht}

\end{figure}%

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fig, ax }\OperatorTok{=}\NormalTok{ plt.subplots(figsize}\OperatorTok{=}\NormalTok{(}\DecValTok{10}\NormalTok{, }\DecValTok{6}\NormalTok{))}

\NormalTok{colors }\OperatorTok{=}\NormalTok{ df[}\StringTok{\textquotesingle{}response\textquotesingle{}}\NormalTok{].}\BuiltInTok{map}\NormalTok{(\{}\DecValTok{0}\NormalTok{: PRECISION\_COLORS[}\StringTok{\textquotesingle{}danger\textquotesingle{}}\NormalTok{], }\DecValTok{1}\NormalTok{: PRECISION\_COLORS[}\StringTok{\textquotesingle{}success\textquotesingle{}}\NormalTok{]\})}
\NormalTok{scatter }\OperatorTok{=}\NormalTok{ ax.scatter(df[}\StringTok{\textquotesingle{}bmi\textquotesingle{}}\NormalTok{], df[}\StringTok{\textquotesingle{}blood\_pressure\_sys\textquotesingle{}}\NormalTok{], c}\OperatorTok{=}\NormalTok{colors, alpha}\OperatorTok{=}\FloatTok{0.6}\NormalTok{, s}\OperatorTok{=}\DecValTok{50}\NormalTok{)}

\NormalTok{ax.set\_xlabel(}\StringTok{\textquotesingle{}BMI (kg/m²)\textquotesingle{}}\NormalTok{)}
\NormalTok{ax.set\_ylabel(}\StringTok{\textquotesingle{}Systolischer Blutdruck (mmHg)\textquotesingle{}}\NormalTok{)}
\NormalTok{ax.set\_title(}\StringTok{\textquotesingle{}BMI vs. Systolischer Blutdruck\textquotesingle{}}\NormalTok{)}

\NormalTok{legend\_elements }\OperatorTok{=}\NormalTok{ [}
\NormalTok{    Patch(facecolor}\OperatorTok{=}\NormalTok{PRECISION\_COLORS[}\StringTok{\textquotesingle{}success\textquotesingle{}}\NormalTok{], alpha}\OperatorTok{=}\FloatTok{0.6}\NormalTok{, label}\OperatorTok{=}\StringTok{\textquotesingle{}Responder\textquotesingle{}}\NormalTok{),}
\NormalTok{    Patch(facecolor}\OperatorTok{=}\NormalTok{PRECISION\_COLORS[}\StringTok{\textquotesingle{}danger\textquotesingle{}}\NormalTok{], alpha}\OperatorTok{=}\FloatTok{0.6}\NormalTok{, label}\OperatorTok{=}\StringTok{\textquotesingle{}Non{-}Responder\textquotesingle{}}\NormalTok{)}
\NormalTok{]}
\NormalTok{ax.legend(handles}\OperatorTok{=}\NormalTok{legend\_elements)}

\NormalTok{plt.tight\_layout()}
\NormalTok{plt.show()}
\end{Highlighting}
\end{Shaded}

\begin{figure}[H]

\centering{

\pandocbounded{\includegraphics[keepaspectratio]{beispiel_analyse_files/figure-pdf/fig-bmi-bp-output-1.png}}

}

\caption{\label{fig-bmi-bp}BMI vs.~Systolischer Blutdruck}

\end{figure}%

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{Teil 2: Statistische
Analysen}\label{teil-2-statistische-analysen}

\subsection{2.1 Deskriptive Statistik nach
Gruppen}\label{deskriptive-statistik-nach-gruppen}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Zusammenfassung nach Behandlungsgruppe}
\NormalTok{numeric\_cols }\OperatorTok{=}\NormalTok{ [}\StringTok{\textquotesingle{}age\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}bmi\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}blood\_pressure\_sys\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}blood\_pressure\_dia\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}cholesterol\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}glucose\textquotesingle{}}\NormalTok{]}

\NormalTok{summary\_by\_group }\OperatorTok{=}\NormalTok{ df.groupby(}\StringTok{\textquotesingle{}treatment\_group\textquotesingle{}}\NormalTok{)[numeric\_cols].agg([}\StringTok{\textquotesingle{}mean\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}std\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}median\textquotesingle{}}\NormalTok{]).}\BuiltInTok{round}\NormalTok{(}\DecValTok{2}\NormalTok{)}
\NormalTok{summary\_by\_group}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lllllllllllllllllll@{}}
\toprule\noalign{}
& \multicolumn{3}{l}{%
age} & \multicolumn{3}{l}{%
bmi} & \multicolumn{3}{l}{%
blood\_pressure\_sys} & \multicolumn{3}{l}{%
blood\_pressure\_dia} & \multicolumn{3}{l}{%
cholesterol} & \multicolumn{3}{l@{}}{%
glucose} \\
& mean & std & median & mean & std & median & mean & std & median & mean
& std & median & mean & std & median & mean & std & median \\
treatment\_group & & & & & & & & & & & & & & & & & & \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
A & 52.91 & 14.00 & 55.0 & 25.40 & 5.29 & 25.35 & 129.34 & 21.80 & 128.0
& 81.41 & 10.91 & 81.0 & 201.72 & 38.17 & 198.5 & 99.50 & 23.71 &
98.5 \\
B & 54.82 & 13.57 & 54.5 & 26.75 & 4.85 & 26.75 & 127.59 & 19.22 & 126.5
& 82.21 & 11.63 & 82.0 & 204.98 & 44.33 & 209.0 & 100.90 & 22.00 &
101.0 \\
Placebo & 53.44 & 14.35 & 54.5 & 23.94 & 4.46 & 23.35 & 131.88 & 18.58 &
133.5 & 81.41 & 10.67 & 80.5 & 210.85 & 38.21 & 214.5 & 98.21 & 27.66 &
100.5 \\
\end{longtable}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Response{-}Rate pro Gruppe}
\NormalTok{response\_summary }\OperatorTok{=}\NormalTok{ df.groupby(}\StringTok{\textquotesingle{}treatment\_group\textquotesingle{}}\NormalTok{).agg(}
\NormalTok{    n\_total}\OperatorTok{=}\NormalTok{(}\StringTok{\textquotesingle{}patient\_id\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}count\textquotesingle{}}\NormalTok{),}
\NormalTok{    n\_responders}\OperatorTok{=}\NormalTok{(}\StringTok{\textquotesingle{}response\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}sum\textquotesingle{}}\NormalTok{),}
\NormalTok{    response\_rate}\OperatorTok{=}\NormalTok{(}\StringTok{\textquotesingle{}response\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}mean\textquotesingle{}}\NormalTok{)}
\NormalTok{).}\BuiltInTok{round}\NormalTok{(}\DecValTok{3}\NormalTok{)}

\NormalTok{response\_summary[}\StringTok{\textquotesingle{}response\_rate\_pct\textquotesingle{}}\NormalTok{] }\OperatorTok{=}\NormalTok{ (response\_summary[}\StringTok{\textquotesingle{}response\_rate\textquotesingle{}}\NormalTok{] }\OperatorTok{*} \DecValTok{100}\NormalTok{).}\BuiltInTok{round}\NormalTok{(}\DecValTok{1}\NormalTok{)}
\NormalTok{response\_summary}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lllll@{}}
\toprule\noalign{}
& n\_total & n\_responders & response\_rate & response\_rate\_pct \\
treatment\_group & & & & \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
A & 74 & 48 & 0.649 & 64.9 \\
B & 92 & 59 & 0.641 & 64.1 \\
Placebo & 34 & 21 & 0.618 & 61.8 \\
\end{longtable}

\subsection{2.2 Statistische Tests}\label{statistische-tests}

\subsubsection{Chi-Quadrat-Test: Response
vs.~Behandlungsgruppe}\label{chi-quadrat-test-response-vs.-behandlungsgruppe}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Kontingenztabelle erstellen}
\NormalTok{contingency\_table }\OperatorTok{=}\NormalTok{ pd.crosstab(df[}\StringTok{\textquotesingle{}treatment\_group\textquotesingle{}}\NormalTok{], df[}\StringTok{\textquotesingle{}response\textquotesingle{}}\NormalTok{])}
\BuiltInTok{print}\NormalTok{(}\StringTok{\textquotesingle{}Kontingenztabelle:\textquotesingle{}}\NormalTok{)}
\BuiltInTok{print}\NormalTok{(contingency\_table)}
\BuiltInTok{print}\NormalTok{()}

\CommentTok{\# Chi{-}Quadrat{-}Test}
\NormalTok{chi2, p\_value, dof, expected }\OperatorTok{=}\NormalTok{ chi2\_contingency(contingency\_table)}

\BuiltInTok{print}\NormalTok{(}\StringTok{\textquotesingle{}Chi{-}Quadrat{-}Test Ergebnisse:\textquotesingle{}}\NormalTok{)}
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f\textquotesingle{}  Chi² = }\SpecialCharTok{\{}\NormalTok{chi2}\SpecialCharTok{:.4f\}}\SpecialStringTok{\textquotesingle{}}\NormalTok{)}
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f\textquotesingle{}  p{-}Wert = }\SpecialCharTok{\{}\NormalTok{p\_value}\SpecialCharTok{:.4f\}}\SpecialStringTok{\textquotesingle{}}\NormalTok{)}
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f\textquotesingle{}  Freiheitsgrade = }\SpecialCharTok{\{}\NormalTok{dof}\SpecialCharTok{\}}\SpecialStringTok{\textquotesingle{}}\NormalTok{)}
\BuiltInTok{print}\NormalTok{()}

\ControlFlowTok{if}\NormalTok{ p\_value }\OperatorTok{\textless{}} \FloatTok{0.05}\NormalTok{:}
    \BuiltInTok{print}\NormalTok{(}\StringTok{\textquotesingle{}→ Signifikanter Zusammenhang zwischen Behandlungsgruppe und Response (p \textless{} 0.05)\textquotesingle{}}\NormalTok{)}
\ControlFlowTok{else}\NormalTok{:}
    \BuiltInTok{print}\NormalTok{(}\StringTok{\textquotesingle{}→ Kein signifikanter Zusammenhang gefunden (p \textgreater{}= 0.05)\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Kontingenztabelle:
response          0   1
treatment_group        
A                26  48
B                33  59
Placebo          13  21

Chi-Quadrat-Test Ergebnisse:
  Chi² = 0.0984
  p-Wert = 0.9520
  Freiheitsgrade = 2

→ Kein signifikanter Zusammenhang gefunden (p >= 0.05)
\end{verbatim}

\subsubsection{ANOVA: Alter nach
Behandlungsgruppe}\label{anova-alter-nach-behandlungsgruppe}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# ANOVA für Alter zwischen Gruppen}
\NormalTok{groups }\OperatorTok{=}\NormalTok{ [group[}\StringTok{\textquotesingle{}age\textquotesingle{}}\NormalTok{].values }\ControlFlowTok{for}\NormalTok{ name, group }\KeywordTok{in}\NormalTok{ df.groupby(}\StringTok{\textquotesingle{}treatment\_group\textquotesingle{}}\NormalTok{)]}
\NormalTok{f\_stat, p\_value\_anova }\OperatorTok{=}\NormalTok{ f\_oneway(}\OperatorTok{*}\NormalTok{groups)}

\BuiltInTok{print}\NormalTok{(}\StringTok{\textquotesingle{}ANOVA: Alter nach Behandlungsgruppe\textquotesingle{}}\NormalTok{)}
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f\textquotesingle{}  F{-}Statistik = }\SpecialCharTok{\{}\NormalTok{f\_stat}\SpecialCharTok{:.4f\}}\SpecialStringTok{\textquotesingle{}}\NormalTok{)}
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f\textquotesingle{}  p{-}Wert = }\SpecialCharTok{\{}\NormalTok{p\_value\_anova}\SpecialCharTok{:.4f\}}\SpecialStringTok{\textquotesingle{}}\NormalTok{)}
\BuiltInTok{print}\NormalTok{()}

\ControlFlowTok{if}\NormalTok{ p\_value\_anova }\OperatorTok{\textless{}} \FloatTok{0.05}\NormalTok{:}
    \BuiltInTok{print}\NormalTok{(}\StringTok{\textquotesingle{}→ Signifikante Unterschiede im Alter zwischen den Gruppen\textquotesingle{}}\NormalTok{)}
\ControlFlowTok{else}\NormalTok{:}
    \BuiltInTok{print}\NormalTok{(}\StringTok{\textquotesingle{}→ Keine signifikanten Altersunterschiede zwischen den Gruppen (gut für Randomisierung!)\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
ANOVA: Alter nach Behandlungsgruppe
  F-Statistik = 0.4092
  p-Wert = 0.6647

→ Keine signifikanten Altersunterschiede zwischen den Gruppen (gut für Randomisierung!)
\end{verbatim}

\subsubsection{T-Test: Responder
vs.~Non-Responder}\label{t-test-responder-vs.-non-responder}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# T{-}Tests für verschiedene Variablen}
\NormalTok{responders }\OperatorTok{=}\NormalTok{ df[df[}\StringTok{\textquotesingle{}response\textquotesingle{}}\NormalTok{] }\OperatorTok{==} \DecValTok{1}\NormalTok{]}
\NormalTok{non\_responders }\OperatorTok{=}\NormalTok{ df[df[}\StringTok{\textquotesingle{}response\textquotesingle{}}\NormalTok{] }\OperatorTok{==} \DecValTok{0}\NormalTok{]}

\NormalTok{test\_results }\OperatorTok{=}\NormalTok{ []}

\ControlFlowTok{for}\NormalTok{ col }\KeywordTok{in}\NormalTok{ numeric\_cols:}
\NormalTok{    t\_stat, p\_val }\OperatorTok{=}\NormalTok{ ttest\_ind(responders[col], non\_responders[col])}
    
\NormalTok{    test\_results.append(\{}
        \StringTok{\textquotesingle{}Variable\textquotesingle{}}\NormalTok{: col,}
        \StringTok{\textquotesingle{}Mean Responder\textquotesingle{}}\NormalTok{: responders[col].mean(),}
        \StringTok{\textquotesingle{}Mean Non{-}Responder\textquotesingle{}}\NormalTok{: non\_responders[col].mean(),}
        \StringTok{\textquotesingle{}t{-}Statistik\textquotesingle{}}\NormalTok{: t\_stat,}
        \StringTok{\textquotesingle{}p{-}Wert\textquotesingle{}}\NormalTok{: p\_val,}
        \StringTok{\textquotesingle{}Signifikant\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}Ja\textquotesingle{}} \ControlFlowTok{if}\NormalTok{ p\_val }\OperatorTok{\textless{}} \FloatTok{0.05} \ControlFlowTok{else} \StringTok{\textquotesingle{}Nein\textquotesingle{}}
\NormalTok{    \})}

\NormalTok{results\_df }\OperatorTok{=}\NormalTok{ pd.DataFrame(test\_results).}\BuiltInTok{round}\NormalTok{(}\DecValTok{4}\NormalTok{)}
\NormalTok{results\_df}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}lllllll@{}}
\toprule\noalign{}
& Variable & Mean Responder & Mean Non-Responder & t-Statistik & p-Wert
& Signifikant \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
0 & age & 54.7969 & 52.2361 & 1.2595 & 0.2093 & Nein \\
1 & bmi & 25.7016 & 25.9042 & -0.2724 & 0.7856 & Nein \\
2 & blood\_pressure\_sys & 129.0156 & 128.8750 & 0.0474 & 0.9622 &
Nein \\
3 & blood\_pressure\_dia & 81.4766 & 82.3056 & -0.5032 & 0.6154 &
Nein \\
4 & cholesterol & 202.8281 & 208.2222 & -0.8916 & 0.3737 & Nein \\
5 & glucose & 100.0312 & 99.7361 & 0.0848 & 0.9325 & Nein \\
\end{longtable}

\subsection{2.3 Korrelationsanalyse}\label{korrelationsanalyse}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Korrelationsmatrix}
\NormalTok{corr\_matrix }\OperatorTok{=}\NormalTok{ df[numeric\_cols].corr()}

\CommentTok{\# Heatmap}
\NormalTok{fig, ax }\OperatorTok{=}\NormalTok{ plt.subplots(figsize}\OperatorTok{=}\NormalTok{(}\DecValTok{10}\NormalTok{, }\DecValTok{8}\NormalTok{))}
\NormalTok{mask }\OperatorTok{=}\NormalTok{ np.triu(np.ones\_like(corr\_matrix, dtype}\OperatorTok{=}\BuiltInTok{bool}\NormalTok{), k}\OperatorTok{=}\DecValTok{1}\NormalTok{)}

\NormalTok{sns.heatmap(corr\_matrix, mask}\OperatorTok{=}\NormalTok{mask, annot}\OperatorTok{=}\VariableTok{True}\NormalTok{, fmt}\OperatorTok{=}\StringTok{\textquotesingle{}.2f\textquotesingle{}}\NormalTok{, cmap}\OperatorTok{=}\StringTok{\textquotesingle{}RdBu\_r\textquotesingle{}}\NormalTok{,}
\NormalTok{            center}\OperatorTok{=}\DecValTok{0}\NormalTok{, square}\OperatorTok{=}\VariableTok{True}\NormalTok{, linewidths}\OperatorTok{=}\FloatTok{0.5}\NormalTok{, ax}\OperatorTok{=}\NormalTok{ax,}
\NormalTok{            cbar\_kws}\OperatorTok{=}\NormalTok{\{}\StringTok{\textquotesingle{}label\textquotesingle{}}\NormalTok{: }\StringTok{\textquotesingle{}Korrelationskoeffizient\textquotesingle{}}\NormalTok{\})}

\NormalTok{ax.set\_title(}\StringTok{\textquotesingle{}Korrelationsmatrix der numerischen Variablen\textquotesingle{}}\NormalTok{, fontsize}\OperatorTok{=}\DecValTok{14}\NormalTok{, fontweight}\OperatorTok{=}\StringTok{\textquotesingle{}bold\textquotesingle{}}\NormalTok{)}
\NormalTok{plt.tight\_layout()}
\NormalTok{plt.show()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{beispiel_analyse_files/figure-pdf/cell-14-output-1.png}}

\subsection{2.4 Logistische Regression}\label{logistische-regression}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Features vorbereiten}
\NormalTok{X }\OperatorTok{=}\NormalTok{ df[numeric\_cols].copy()}
\NormalTok{y }\OperatorTok{=}\NormalTok{ df[}\StringTok{\textquotesingle{}response\textquotesingle{}}\NormalTok{]}

\CommentTok{\# Standardisierung}
\NormalTok{scaler }\OperatorTok{=}\NormalTok{ StandardScaler()}
\NormalTok{X\_scaled }\OperatorTok{=}\NormalTok{ scaler.fit\_transform(X)}

\CommentTok{\# Modell trainieren}
\NormalTok{model }\OperatorTok{=}\NormalTok{ LogisticRegression(random\_state}\OperatorTok{=}\DecValTok{42}\NormalTok{, max\_iter}\OperatorTok{=}\DecValTok{1000}\NormalTok{)}
\NormalTok{model.fit(X\_scaled, y)}

\CommentTok{\# Cross{-}Validation}
\NormalTok{cv\_scores }\OperatorTok{=}\NormalTok{ cross\_val\_score(model, X\_scaled, y, cv}\OperatorTok{=}\DecValTok{5}\NormalTok{, scoring}\OperatorTok{=}\StringTok{\textquotesingle{}accuracy\textquotesingle{}}\NormalTok{)}

\BuiltInTok{print}\NormalTok{(}\StringTok{\textquotesingle{}Logistische Regression {-} Ergebnisse\textquotesingle{}}\NormalTok{)}
\BuiltInTok{print}\NormalTok{(}\StringTok{\textquotesingle{}=\textquotesingle{}} \OperatorTok{*} \DecValTok{40}\NormalTok{)}
\BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f\textquotesingle{}Cross{-}Validation Accuracy: }\SpecialCharTok{\{}\NormalTok{cv\_scores}\SpecialCharTok{.}\NormalTok{mean()}\SpecialCharTok{:.3f\}}\SpecialStringTok{ (+/{-} }\SpecialCharTok{\{}\NormalTok{cv\_scores}\SpecialCharTok{.}\NormalTok{std()}\OperatorTok{*}\DecValTok{2}\SpecialCharTok{:.3f\}}\SpecialStringTok{)\textquotesingle{}}\NormalTok{)}
\BuiltInTok{print}\NormalTok{()}

\CommentTok{\# Koeffizienten}
\NormalTok{coef\_df }\OperatorTok{=}\NormalTok{ pd.DataFrame(\{}
    \StringTok{\textquotesingle{}Variable\textquotesingle{}}\NormalTok{: numeric\_cols,}
    \StringTok{\textquotesingle{}Koeffizient\textquotesingle{}}\NormalTok{: model.coef\_[}\DecValTok{0}\NormalTok{],}
    \StringTok{\textquotesingle{}Odds Ratio\textquotesingle{}}\NormalTok{: np.exp(model.coef\_[}\DecValTok{0}\NormalTok{])}
\NormalTok{\}).sort\_values(}\StringTok{\textquotesingle{}Koeffizient\textquotesingle{}}\NormalTok{, key}\OperatorTok{=}\BuiltInTok{abs}\NormalTok{, ascending}\OperatorTok{=}\VariableTok{False}\NormalTok{)}

\BuiltInTok{print}\NormalTok{(}\StringTok{\textquotesingle{}Feature{-}Wichtigkeit (nach Koeffizient):\textquotesingle{}}\NormalTok{)}
\NormalTok{coef\_df.}\BuiltInTok{round}\NormalTok{(}\DecValTok{4}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
Logistische Regression - Ergebnisse
========================================
Cross-Validation Accuracy: 0.615 (+/- 0.051)

Feature-Wichtigkeit (nach Koeffizient):
\end{verbatim}

\begin{longtable}[]{@{}llll@{}}
\toprule\noalign{}
& Variable & Koeffizient & Odds Ratio \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
0 & age & 0.1813 & 1.1987 \\
4 & cholesterol & -0.1268 & 0.8809 \\
3 & blood\_pressure\_dia & -0.0542 & 0.9472 \\
2 & blood\_pressure\_sys & 0.0394 & 1.0401 \\
1 & bmi & -0.0348 & 0.9658 \\
5 & glucose & 0.0096 & 1.0096 \\
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{Teil 3: Publikationsreife
Visualisierungen}\label{teil-3-publikationsreife-visualisierungen}

\subsection{3.1 Demografische
Übersicht}\label{demografische-uxfcbersicht}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fig, axes }\OperatorTok{=}\NormalTok{ plt.subplots(}\DecValTok{2}\NormalTok{, }\DecValTok{2}\NormalTok{, figsize}\OperatorTok{=}\NormalTok{(}\DecValTok{14}\NormalTok{, }\DecValTok{10}\NormalTok{))}

\CommentTok{\# 1. Altersverteilung}
\NormalTok{ax1 }\OperatorTok{=}\NormalTok{ axes[}\DecValTok{0}\NormalTok{, }\DecValTok{0}\NormalTok{]}
\NormalTok{ax1.hist(df[}\StringTok{\textquotesingle{}age\textquotesingle{}}\NormalTok{], bins}\OperatorTok{=}\DecValTok{25}\NormalTok{, color}\OperatorTok{=}\NormalTok{PRECISION\_COLORS[}\StringTok{\textquotesingle{}primary\textquotesingle{}}\NormalTok{], alpha}\OperatorTok{=}\FloatTok{0.8}\NormalTok{, edgecolor}\OperatorTok{=}\StringTok{\textquotesingle{}white\textquotesingle{}}\NormalTok{)}
\NormalTok{ax1.axvline(df[}\StringTok{\textquotesingle{}age\textquotesingle{}}\NormalTok{].mean(), color}\OperatorTok{=}\NormalTok{PRECISION\_COLORS[}\StringTok{\textquotesingle{}danger\textquotesingle{}}\NormalTok{], linestyle}\OperatorTok{=}\StringTok{\textquotesingle{}{-}{-}\textquotesingle{}}\NormalTok{, linewidth}\OperatorTok{=}\DecValTok{2}\NormalTok{, }
\NormalTok{            label}\OperatorTok{=}\SpecialStringTok{f\textquotesingle{}Mittelwert: }\SpecialCharTok{\{}\NormalTok{df[}\StringTok{"age"}\NormalTok{]}\SpecialCharTok{.}\NormalTok{mean()}\SpecialCharTok{:.1f\}}\SpecialStringTok{\textquotesingle{}}\NormalTok{)}
\NormalTok{ax1.axvline(df[}\StringTok{\textquotesingle{}age\textquotesingle{}}\NormalTok{].median(), color}\OperatorTok{=}\NormalTok{PRECISION\_COLORS[}\StringTok{\textquotesingle{}warning\textquotesingle{}}\NormalTok{], linestyle}\OperatorTok{=}\StringTok{\textquotesingle{}:\textquotesingle{}}\NormalTok{, linewidth}\OperatorTok{=}\DecValTok{2}\NormalTok{, }
\NormalTok{            label}\OperatorTok{=}\SpecialStringTok{f\textquotesingle{}Median: }\SpecialCharTok{\{}\NormalTok{df[}\StringTok{"age"}\NormalTok{]}\SpecialCharTok{.}\NormalTok{median()}\SpecialCharTok{:.1f\}}\SpecialStringTok{\textquotesingle{}}\NormalTok{)}
\NormalTok{ax1.set\_xlabel(}\StringTok{\textquotesingle{}Alter (Jahre)\textquotesingle{}}\NormalTok{)}
\NormalTok{ax1.set\_ylabel(}\StringTok{\textquotesingle{}Anzahl\textquotesingle{}}\NormalTok{)}
\NormalTok{ax1.set\_title(}\StringTok{\textquotesingle{}Altersverteilung\textquotesingle{}}\NormalTok{)}
\NormalTok{ax1.legend()}

\CommentTok{\# 2. Geschlechterverteilung}
\NormalTok{ax2 }\OperatorTok{=}\NormalTok{ axes[}\DecValTok{0}\NormalTok{, }\DecValTok{1}\NormalTok{]}
\NormalTok{gender\_counts }\OperatorTok{=}\NormalTok{ df[}\StringTok{\textquotesingle{}gender\textquotesingle{}}\NormalTok{].value\_counts()}
\NormalTok{colors\_pie }\OperatorTok{=}\NormalTok{ [PRECISION\_COLORS[}\StringTok{\textquotesingle{}primary\textquotesingle{}}\NormalTok{], PRECISION\_COLORS[}\StringTok{\textquotesingle{}accent\textquotesingle{}}\NormalTok{]]}
\NormalTok{wedges, texts, autotexts }\OperatorTok{=}\NormalTok{ ax2.pie(gender\_counts.values, labels}\OperatorTok{=}\NormalTok{[}\StringTok{\textquotesingle{}Männlich\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Weiblich\textquotesingle{}}\NormalTok{], }
\NormalTok{                                    autopct}\OperatorTok{=}\StringTok{\textquotesingle{}}\SpecialCharTok{\%1.1f\%\%}\StringTok{\textquotesingle{}}\NormalTok{, colors}\OperatorTok{=}\NormalTok{colors\_pie, startangle}\OperatorTok{=}\DecValTok{90}\NormalTok{,}
\NormalTok{                                    explode}\OperatorTok{=}\NormalTok{(}\FloatTok{0.02}\NormalTok{, }\FloatTok{0.02}\NormalTok{))}
\ControlFlowTok{for}\NormalTok{ autotext }\KeywordTok{in}\NormalTok{ autotexts:}
\NormalTok{    autotext.set\_color(}\StringTok{\textquotesingle{}white\textquotesingle{}}\NormalTok{)}
\NormalTok{    autotext.set\_fontweight(}\StringTok{\textquotesingle{}bold\textquotesingle{}}\NormalTok{)}
\NormalTok{ax2.set\_title(}\StringTok{\textquotesingle{}Geschlechterverteilung\textquotesingle{}}\NormalTok{)}

\CommentTok{\# 3. BMI{-}Verteilung nach Geschlecht}
\NormalTok{ax3 }\OperatorTok{=}\NormalTok{ axes[}\DecValTok{1}\NormalTok{, }\DecValTok{0}\NormalTok{]}
\ControlFlowTok{for}\NormalTok{ gender, color, label }\KeywordTok{in}\NormalTok{ [(}\StringTok{\textquotesingle{}M\textquotesingle{}}\NormalTok{, PRECISION\_COLORS[}\StringTok{\textquotesingle{}primary\textquotesingle{}}\NormalTok{], }\StringTok{\textquotesingle{}Männlich\textquotesingle{}}\NormalTok{), }
\NormalTok{                              (}\StringTok{\textquotesingle{}F\textquotesingle{}}\NormalTok{, PRECISION\_COLORS[}\StringTok{\textquotesingle{}accent\textquotesingle{}}\NormalTok{], }\StringTok{\textquotesingle{}Weiblich\textquotesingle{}}\NormalTok{)]:}
\NormalTok{    subset }\OperatorTok{=}\NormalTok{ df[df[}\StringTok{\textquotesingle{}gender\textquotesingle{}}\NormalTok{] }\OperatorTok{==}\NormalTok{ gender]}
\NormalTok{    ax3.hist(subset[}\StringTok{\textquotesingle{}bmi\textquotesingle{}}\NormalTok{], bins}\OperatorTok{=}\DecValTok{20}\NormalTok{, alpha}\OperatorTok{=}\FloatTok{0.6}\NormalTok{, color}\OperatorTok{=}\NormalTok{color, label}\OperatorTok{=}\NormalTok{label, edgecolor}\OperatorTok{=}\StringTok{\textquotesingle{}white\textquotesingle{}}\NormalTok{)}
\NormalTok{ax3.set\_xlabel(}\StringTok{\textquotesingle{}BMI (kg/m²)\textquotesingle{}}\NormalTok{)}
\NormalTok{ax3.set\_ylabel(}\StringTok{\textquotesingle{}Anzahl\textquotesingle{}}\NormalTok{)}
\NormalTok{ax3.set\_title(}\StringTok{\textquotesingle{}BMI{-}Verteilung nach Geschlecht\textquotesingle{}}\NormalTok{)}
\NormalTok{ax3.legend()}

\CommentTok{\# 4. Behandlungsgruppen}
\NormalTok{ax4 }\OperatorTok{=}\NormalTok{ axes[}\DecValTok{1}\NormalTok{, }\DecValTok{1}\NormalTok{]}
\NormalTok{group\_counts }\OperatorTok{=}\NormalTok{ df[}\StringTok{\textquotesingle{}treatment\_group\textquotesingle{}}\NormalTok{].value\_counts().sort\_index()}
\NormalTok{bars }\OperatorTok{=}\NormalTok{ ax4.bar(group\_counts.index, group\_counts.values, }
\NormalTok{               color}\OperatorTok{=}\NormalTok{[PRECISION\_COLORS[}\StringTok{\textquotesingle{}primary\textquotesingle{}}\NormalTok{], PRECISION\_COLORS[}\StringTok{\textquotesingle{}accent\textquotesingle{}}\NormalTok{], PRECISION\_COLORS[}\StringTok{\textquotesingle{}secondary\textquotesingle{}}\NormalTok{]],}
\NormalTok{               edgecolor}\OperatorTok{=}\StringTok{\textquotesingle{}white\textquotesingle{}}\NormalTok{, linewidth}\OperatorTok{=}\FloatTok{1.5}\NormalTok{)}
\NormalTok{ax4.set\_xlabel(}\StringTok{\textquotesingle{}Behandlungsgruppe\textquotesingle{}}\NormalTok{)}
\NormalTok{ax4.set\_ylabel(}\StringTok{\textquotesingle{}Anzahl Patienten\textquotesingle{}}\NormalTok{)}
\NormalTok{ax4.set\_title(}\StringTok{\textquotesingle{}Verteilung der Behandlungsgruppen\textquotesingle{}}\NormalTok{)}

\ControlFlowTok{for}\NormalTok{ bar }\KeywordTok{in}\NormalTok{ bars:}
\NormalTok{    height }\OperatorTok{=}\NormalTok{ bar.get\_height()}
\NormalTok{    ax4.text(bar.get\_x() }\OperatorTok{+}\NormalTok{ bar.get\_width()}\OperatorTok{/}\FloatTok{2.}\NormalTok{, height }\OperatorTok{+} \DecValTok{1}\NormalTok{,}
             \SpecialStringTok{f\textquotesingle{}n=}\SpecialCharTok{\{}\BuiltInTok{int}\NormalTok{(height)}\SpecialCharTok{\}}\SpecialStringTok{\textquotesingle{}}\NormalTok{, ha}\OperatorTok{=}\StringTok{\textquotesingle{}center\textquotesingle{}}\NormalTok{, va}\OperatorTok{=}\StringTok{\textquotesingle{}bottom\textquotesingle{}}\NormalTok{, fontweight}\OperatorTok{=}\StringTok{\textquotesingle{}bold\textquotesingle{}}\NormalTok{)}

\NormalTok{plt.tight\_layout()}
\NormalTok{plt.show()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{beispiel_analyse_files/figure-pdf/cell-16-output-1.png}}

\subsection{3.2 Klinische Parameter}\label{klinische-parameter}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fig, axes }\OperatorTok{=}\NormalTok{ plt.subplots(}\DecValTok{1}\NormalTok{, }\DecValTok{3}\NormalTok{, figsize}\OperatorTok{=}\NormalTok{(}\DecValTok{16}\NormalTok{, }\DecValTok{5}\NormalTok{))}

\NormalTok{clinical\_vars }\OperatorTok{=}\NormalTok{ [}\StringTok{\textquotesingle{}blood\_pressure\_sys\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}cholesterol\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}glucose\textquotesingle{}}\NormalTok{]}
\NormalTok{titles }\OperatorTok{=}\NormalTok{ [}\StringTok{\textquotesingle{}Systolischer Blutdruck\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Cholesterin\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Glukose\textquotesingle{}}\NormalTok{]}
\NormalTok{units }\OperatorTok{=}\NormalTok{ [}\StringTok{\textquotesingle{}mmHg\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}mg/dL\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}mg/dL\textquotesingle{}}\NormalTok{]}

\ControlFlowTok{for}\NormalTok{ ax, var, title, unit }\KeywordTok{in} \BuiltInTok{zip}\NormalTok{(axes, clinical\_vars, titles, units):}
\NormalTok{    bp }\OperatorTok{=}\NormalTok{ ax.boxplot([df[df[}\StringTok{\textquotesingle{}treatment\_group\textquotesingle{}}\NormalTok{] }\OperatorTok{==}\NormalTok{ g][var] }\ControlFlowTok{for}\NormalTok{ g }\KeywordTok{in}\NormalTok{ [}\StringTok{\textquotesingle{}A\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}B\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Placebo\textquotesingle{}}\NormalTok{]],}
\NormalTok{                    labels}\OperatorTok{=}\NormalTok{[}\StringTok{\textquotesingle{}Gruppe A\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Gruppe B\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Placebo\textquotesingle{}}\NormalTok{],}
\NormalTok{                    patch\_artist}\OperatorTok{=}\VariableTok{True}\NormalTok{, notch}\OperatorTok{=}\VariableTok{True}\NormalTok{)}
    
\NormalTok{    colors\_box }\OperatorTok{=}\NormalTok{ [PRECISION\_COLORS[}\StringTok{\textquotesingle{}primary\textquotesingle{}}\NormalTok{], PRECISION\_COLORS[}\StringTok{\textquotesingle{}accent\textquotesingle{}}\NormalTok{], PRECISION\_COLORS[}\StringTok{\textquotesingle{}secondary\textquotesingle{}}\NormalTok{]]}
    \ControlFlowTok{for}\NormalTok{ patch, color }\KeywordTok{in} \BuiltInTok{zip}\NormalTok{(bp[}\StringTok{\textquotesingle{}boxes\textquotesingle{}}\NormalTok{], colors\_box):}
\NormalTok{        patch.set\_facecolor(color)}
\NormalTok{        patch.set\_alpha(}\FloatTok{0.7}\NormalTok{)}
    
    \ControlFlowTok{for}\NormalTok{ median }\KeywordTok{in}\NormalTok{ bp[}\StringTok{\textquotesingle{}medians\textquotesingle{}}\NormalTok{]:}
\NormalTok{        median.set\_color(}\StringTok{\textquotesingle{}white\textquotesingle{}}\NormalTok{)}
\NormalTok{        median.set\_linewidth(}\DecValTok{2}\NormalTok{)}
    
\NormalTok{    ax.set\_ylabel(}\SpecialStringTok{f\textquotesingle{}}\SpecialCharTok{\{}\NormalTok{title}\SpecialCharTok{\}}\SpecialStringTok{ (}\SpecialCharTok{\{}\NormalTok{unit}\SpecialCharTok{\}}\SpecialStringTok{)\textquotesingle{}}\NormalTok{)}
\NormalTok{    ax.set\_title(title)}

\NormalTok{plt.tight\_layout()}
\NormalTok{plt.show()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{beispiel_analyse_files/figure-pdf/cell-17-output-1.png}}

\subsection{3.3 Response-Analyse}\label{response-analyse}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fig, axes }\OperatorTok{=}\NormalTok{ plt.subplots(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, figsize}\OperatorTok{=}\NormalTok{(}\DecValTok{14}\NormalTok{, }\DecValTok{6}\NormalTok{))}

\CommentTok{\# 1. Response{-}Rate nach Behandlungsgruppe}
\NormalTok{ax1 }\OperatorTok{=}\NormalTok{ axes[}\DecValTok{0}\NormalTok{]}
\NormalTok{response\_by\_group }\OperatorTok{=}\NormalTok{ df.groupby(}\StringTok{\textquotesingle{}treatment\_group\textquotesingle{}}\NormalTok{)[}\StringTok{\textquotesingle{}response\textquotesingle{}}\NormalTok{].agg([}\StringTok{\textquotesingle{}sum\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}count\textquotesingle{}}\NormalTok{])}
\NormalTok{response\_by\_group[}\StringTok{\textquotesingle{}non\_response\textquotesingle{}}\NormalTok{] }\OperatorTok{=}\NormalTok{ response\_by\_group[}\StringTok{\textquotesingle{}count\textquotesingle{}}\NormalTok{] }\OperatorTok{{-}}\NormalTok{ response\_by\_group[}\StringTok{\textquotesingle{}sum\textquotesingle{}}\NormalTok{]}
\NormalTok{response\_by\_group[}\StringTok{\textquotesingle{}rate\textquotesingle{}}\NormalTok{] }\OperatorTok{=}\NormalTok{ response\_by\_group[}\StringTok{\textquotesingle{}sum\textquotesingle{}}\NormalTok{] }\OperatorTok{/}\NormalTok{ response\_by\_group[}\StringTok{\textquotesingle{}count\textquotesingle{}}\NormalTok{] }\OperatorTok{*} \DecValTok{100}

\NormalTok{x }\OperatorTok{=}\NormalTok{ np.arange(}\BuiltInTok{len}\NormalTok{(response\_by\_group))}
\NormalTok{width }\OperatorTok{=} \FloatTok{0.35}

\NormalTok{bars1 }\OperatorTok{=}\NormalTok{ ax1.bar(x }\OperatorTok{{-}}\NormalTok{ width}\OperatorTok{/}\DecValTok{2}\NormalTok{, response\_by\_group[}\StringTok{\textquotesingle{}sum\textquotesingle{}}\NormalTok{], width, label}\OperatorTok{=}\StringTok{\textquotesingle{}Responder\textquotesingle{}}\NormalTok{, }
\NormalTok{                color}\OperatorTok{=}\NormalTok{PRECISION\_COLORS[}\StringTok{\textquotesingle{}success\textquotesingle{}}\NormalTok{], alpha}\OperatorTok{=}\FloatTok{0.8}\NormalTok{)}
\NormalTok{bars2 }\OperatorTok{=}\NormalTok{ ax1.bar(x }\OperatorTok{+}\NormalTok{ width}\OperatorTok{/}\DecValTok{2}\NormalTok{, response\_by\_group[}\StringTok{\textquotesingle{}non\_response\textquotesingle{}}\NormalTok{], width, label}\OperatorTok{=}\StringTok{\textquotesingle{}Non{-}Responder\textquotesingle{}}\NormalTok{,}
\NormalTok{                color}\OperatorTok{=}\NormalTok{PRECISION\_COLORS[}\StringTok{\textquotesingle{}danger\textquotesingle{}}\NormalTok{], alpha}\OperatorTok{=}\FloatTok{0.8}\NormalTok{)}

\NormalTok{ax1.set\_xlabel(}\StringTok{\textquotesingle{}Behandlungsgruppe\textquotesingle{}}\NormalTok{)}
\NormalTok{ax1.set\_ylabel(}\StringTok{\textquotesingle{}Anzahl Patienten\textquotesingle{}}\NormalTok{)}
\NormalTok{ax1.set\_title(}\StringTok{\textquotesingle{}Response nach Behandlungsgruppe\textquotesingle{}}\NormalTok{)}
\NormalTok{ax1.set\_xticks(x)}
\NormalTok{ax1.set\_xticklabels([}\StringTok{\textquotesingle{}Gruppe A\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Gruppe B\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}Placebo\textquotesingle{}}\NormalTok{])}
\NormalTok{ax1.legend()}

\ControlFlowTok{for}\NormalTok{ i, (idx, row) }\KeywordTok{in} \BuiltInTok{enumerate}\NormalTok{(response\_by\_group.iterrows()):}
\NormalTok{    ax1.text(i, row[}\StringTok{\textquotesingle{}count\textquotesingle{}}\NormalTok{] }\OperatorTok{+} \DecValTok{2}\NormalTok{, }\SpecialStringTok{f\textquotesingle{}}\SpecialCharTok{\{}\NormalTok{row[}\StringTok{"rate"}\NormalTok{]}\SpecialCharTok{:.1f\}}\SpecialStringTok{\%\textquotesingle{}}\NormalTok{, ha}\OperatorTok{=}\StringTok{\textquotesingle{}center\textquotesingle{}}\NormalTok{, fontweight}\OperatorTok{=}\StringTok{\textquotesingle{}bold\textquotesingle{}}\NormalTok{,}
\NormalTok{             color}\OperatorTok{=}\NormalTok{PRECISION\_COLORS[}\StringTok{\textquotesingle{}primary\textquotesingle{}}\NormalTok{])}

\CommentTok{\# 2. Response{-}Rate Vergleich (Lollipop Chart)}
\NormalTok{ax2 }\OperatorTok{=}\NormalTok{ axes[}\DecValTok{1}\NormalTok{]}
\NormalTok{groups }\OperatorTok{=}\NormalTok{ response\_by\_group.index.tolist()}
\NormalTok{rates }\OperatorTok{=}\NormalTok{ response\_by\_group[}\StringTok{\textquotesingle{}rate\textquotesingle{}}\NormalTok{].values}
\NormalTok{colors\_lollipop }\OperatorTok{=}\NormalTok{ [PRECISION\_COLORS[}\StringTok{\textquotesingle{}primary\textquotesingle{}}\NormalTok{], PRECISION\_COLORS[}\StringTok{\textquotesingle{}accent\textquotesingle{}}\NormalTok{], PRECISION\_COLORS[}\StringTok{\textquotesingle{}secondary\textquotesingle{}}\NormalTok{]]}

\NormalTok{ax2.hlines(y}\OperatorTok{=}\NormalTok{groups, xmin}\OperatorTok{=}\DecValTok{0}\NormalTok{, xmax}\OperatorTok{=}\NormalTok{rates, color}\OperatorTok{=}\NormalTok{colors\_lollipop, alpha}\OperatorTok{=}\FloatTok{0.7}\NormalTok{, linewidth}\OperatorTok{=}\DecValTok{3}\NormalTok{)}
\NormalTok{ax2.scatter(rates, groups, color}\OperatorTok{=}\NormalTok{colors\_lollipop, s}\OperatorTok{=}\DecValTok{200}\NormalTok{, zorder}\OperatorTok{=}\DecValTok{3}\NormalTok{)}

\ControlFlowTok{for}\NormalTok{ i, (g, r) }\KeywordTok{in} \BuiltInTok{enumerate}\NormalTok{(}\BuiltInTok{zip}\NormalTok{(groups, rates)):}
\NormalTok{    ax2.text(r }\OperatorTok{+} \DecValTok{2}\NormalTok{, i, }\SpecialStringTok{f\textquotesingle{}}\SpecialCharTok{\{}\NormalTok{r}\SpecialCharTok{:.1f\}}\SpecialStringTok{\%\textquotesingle{}}\NormalTok{, va}\OperatorTok{=}\StringTok{\textquotesingle{}center\textquotesingle{}}\NormalTok{, fontweight}\OperatorTok{=}\StringTok{\textquotesingle{}bold\textquotesingle{}}\NormalTok{)}

\NormalTok{ax2.set\_xlabel(}\StringTok{\textquotesingle{}Response{-}Rate (\%)\textquotesingle{}}\NormalTok{)}
\NormalTok{ax2.set\_xlim(}\DecValTok{0}\NormalTok{, }\DecValTok{100}\NormalTok{)}
\NormalTok{ax2.set\_title(}\StringTok{\textquotesingle{}Response{-}Rate Vergleich\textquotesingle{}}\NormalTok{)}
\NormalTok{ax2.axvline(x}\OperatorTok{=}\DecValTok{50}\NormalTok{, color}\OperatorTok{=}\StringTok{\textquotesingle{}gray\textquotesingle{}}\NormalTok{, linestyle}\OperatorTok{=}\StringTok{\textquotesingle{}{-}{-}\textquotesingle{}}\NormalTok{, alpha}\OperatorTok{=}\FloatTok{0.5}\NormalTok{, label}\OperatorTok{=}\StringTok{\textquotesingle{}50\% Referenz\textquotesingle{}}\NormalTok{)}

\NormalTok{plt.tight\_layout()}
\NormalTok{plt.show()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{beispiel_analyse_files/figure-pdf/cell-18-output-1.png}}

\subsection{3.4 Feature Importance}\label{feature-importance}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{fig, ax }\OperatorTok{=}\NormalTok{ plt.subplots(figsize}\OperatorTok{=}\NormalTok{(}\DecValTok{10}\NormalTok{, }\DecValTok{6}\NormalTok{))}

\NormalTok{colors\_feat }\OperatorTok{=}\NormalTok{ [PRECISION\_COLORS[}\StringTok{\textquotesingle{}primary\textquotesingle{}}\NormalTok{] }\ControlFlowTok{if}\NormalTok{ c }\OperatorTok{\textgreater{}} \DecValTok{0} \ControlFlowTok{else}\NormalTok{ PRECISION\_COLORS[}\StringTok{\textquotesingle{}danger\textquotesingle{}}\NormalTok{] }
               \ControlFlowTok{for}\NormalTok{ c }\KeywordTok{in}\NormalTok{ coef\_df[}\StringTok{\textquotesingle{}Koeffizient\textquotesingle{}}\NormalTok{]]}
\NormalTok{bars }\OperatorTok{=}\NormalTok{ ax.barh(coef\_df[}\StringTok{\textquotesingle{}Variable\textquotesingle{}}\NormalTok{], coef\_df[}\StringTok{\textquotesingle{}Koeffizient\textquotesingle{}}\NormalTok{], color}\OperatorTok{=}\NormalTok{colors\_feat, alpha}\OperatorTok{=}\FloatTok{0.8}\NormalTok{)}

\NormalTok{ax.axvline(x}\OperatorTok{=}\DecValTok{0}\NormalTok{, color}\OperatorTok{=}\StringTok{\textquotesingle{}gray\textquotesingle{}}\NormalTok{, linestyle}\OperatorTok{=}\StringTok{\textquotesingle{}{-}{-}\textquotesingle{}}\NormalTok{, linewidth}\OperatorTok{=}\DecValTok{1}\NormalTok{)}
\NormalTok{ax.set\_xlabel(}\StringTok{\textquotesingle{}Koeffizient (standardisiert)\textquotesingle{}}\NormalTok{)}
\NormalTok{ax.set\_title(}\StringTok{\textquotesingle{}Feature{-}Wichtigkeit für Response{-}Vorhersage\textquotesingle{}}\NormalTok{, fontsize}\OperatorTok{=}\DecValTok{14}\NormalTok{, fontweight}\OperatorTok{=}\StringTok{\textquotesingle{}bold\textquotesingle{}}\NormalTok{)}

\NormalTok{plt.tight\_layout()}
\NormalTok{plt.show()}
\end{Highlighting}
\end{Shaded}

\pandocbounded{\includegraphics[keepaspectratio]{beispiel_analyse_files/figure-pdf/cell-19-output-1.png}}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{Zusammenfassung}\label{zusammenfassung}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Zusammenfassende Statistiken}
\NormalTok{summary }\OperatorTok{=}\NormalTok{ \{}
    \StringTok{\textquotesingle{}Gesamtanzahl Patienten\textquotesingle{}}\NormalTok{: }\BuiltInTok{len}\NormalTok{(df),}
    \StringTok{\textquotesingle{}Durchschnittsalter\textquotesingle{}}\NormalTok{: }\SpecialStringTok{f"}\SpecialCharTok{\{}\NormalTok{df[}\StringTok{\textquotesingle{}age\textquotesingle{}}\NormalTok{]}\SpecialCharTok{.}\NormalTok{mean()}\SpecialCharTok{:.1f\}}\SpecialStringTok{ Jahre"}\NormalTok{,}
    \StringTok{\textquotesingle{}Anteil männlich\textquotesingle{}}\NormalTok{: }\SpecialStringTok{f"}\SpecialCharTok{\{}\NormalTok{(df[}\StringTok{\textquotesingle{}gender\textquotesingle{}}\NormalTok{] }\OperatorTok{==} \StringTok{\textquotesingle{}M\textquotesingle{}}\NormalTok{)}\SpecialCharTok{.}\NormalTok{mean() }\OperatorTok{*} \DecValTok{100}\SpecialCharTok{:.1f\}}\SpecialStringTok{\%"}\NormalTok{,}
    \StringTok{\textquotesingle{}Durchschnittlicher BMI\textquotesingle{}}\NormalTok{: }\SpecialStringTok{f"}\SpecialCharTok{\{}\NormalTok{df[}\StringTok{\textquotesingle{}bmi\textquotesingle{}}\NormalTok{]}\SpecialCharTok{.}\NormalTok{mean()}\SpecialCharTok{:.1f\}}\SpecialStringTok{ kg/m²"}\NormalTok{,}
    \StringTok{\textquotesingle{}Response{-}Rate gesamt\textquotesingle{}}\NormalTok{: }\SpecialStringTok{f"}\SpecialCharTok{\{}\NormalTok{df[}\StringTok{\textquotesingle{}response\textquotesingle{}}\NormalTok{]}\SpecialCharTok{.}\NormalTok{mean() }\OperatorTok{*} \DecValTok{100}\SpecialCharTok{:.1f\}}\SpecialStringTok{\%"}
\NormalTok{\}}

\BuiltInTok{print}\NormalTok{(}\StringTok{\textquotesingle{}=\textquotesingle{}} \OperatorTok{*} \DecValTok{50}\NormalTok{)}
\BuiltInTok{print}\NormalTok{(}\StringTok{\textquotesingle{}ZUSAMMENFASSUNG\textquotesingle{}}\NormalTok{)}
\BuiltInTok{print}\NormalTok{(}\StringTok{\textquotesingle{}=\textquotesingle{}} \OperatorTok{*} \DecValTok{50}\NormalTok{)}
\ControlFlowTok{for}\NormalTok{ key, value }\KeywordTok{in}\NormalTok{ summary.items():}
    \BuiltInTok{print}\NormalTok{(}\SpecialStringTok{f\textquotesingle{}}\SpecialCharTok{\{}\NormalTok{key}\SpecialCharTok{\}}\SpecialStringTok{: }\SpecialCharTok{\{}\NormalTok{value}\SpecialCharTok{\}}\SpecialStringTok{\textquotesingle{}}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
==================================================
ZUSAMMENFASSUNG
==================================================
Gesamtanzahl Patienten: 200
Durchschnittsalter: 53.9 Jahre
Anteil männlich: 50.5%
Durchschnittlicher BMI: 25.8 kg/m²
Response-Rate gesamt: 64.0%
\end{verbatim}

\subsection{Wichtige Erkenntnisse}\label{wichtige-erkenntnisse}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{Datensatz-Größe:} 200 Patienten mit vollständigen Daten
\item
  \textbf{Altersverteilung:} Normalverteilt um \textasciitilde55 Jahre
\item
  \textbf{Geschlechterverteilung:} Ausgeglichen
\item
  \textbf{Randomisierung:} Erfolgreich (keine signifikanten
  Gruppenunterschiede)
\item
  \textbf{Response-Rate:} \textasciitilde65\% über alle Gruppen
\end{enumerate}




\end{document}

---
title: "Downloads"
subtitle: "PDF und LaTeX Export"
---

```{python}
#| echo: false
#| output: asis

from pathlib import Path
import os

# Aktuelles Arbeitsverzeichnis für Debug
cwd = Path.cwd()

# Downloads-Ordner finden (verschiedene mögliche Pfade probieren)
possible_paths = [
    Path("downloads"),           # Vom Projekt-Root
    Path("../downloads"),        # Von reports/
    cwd / "downloads",
    cwd.parent / "downloads",
]

downloads_dir = None
for p in possible_paths:
    if p.exists() and p.is_dir():
        downloads_dir = p
        break

if downloads_dir:
    # Alle PDF und TEX Dateien sammeln
    pdfs = sorted(downloads_dir.glob("*.pdf"))
    texs = sorted(downloads_dir.glob("*.tex"))

    if pdfs or texs:
        print("## Verfügbare Downloads\n")
        print("| Bericht | PDF | LaTeX |")
        print("|---------|-----|-------|")

        # Alle PDFs durchgehen und passende TEX suchen
        seen = set()
        for pdf in pdfs:
            name = pdf.stem
            seen.add(name)
            tex_exists = (downloads_dir / f"{name}.tex").exists()

            pdf_link = f"[PDF](/downloads/{name}.pdf)"
            tex_link = f"[LaTeX](/downloads/{name}.tex)" if tex_exists else "-"

            print(f"| {name} | {pdf_link} | {tex_link} |")

        # TEX-Dateien ohne PDF
        for tex in texs:
            name = tex.stem
            if name not in seen:
                print(f"| {name} | - | [LaTeX](/downloads/{name}.tex) |")
    else:
        print("::: {.callout-info}")
        print("Keine PDF/LaTeX-Dateien im Downloads-Ordner gefunden.")
        print(":::")
else:
    print("::: {.callout-warning}")
    print("Downloads-Ordner nicht gefunden.")
    print(":::")
```

---

## Lokale Render-Befehle

### PDF mit LaTeX generieren

```bash
# In das Projektverzeichnis wechseln
cd /pfad/zu/osws-project-quarto

# PDF generieren (LaTeX wird im notebooks/ Ordner erstellt)
quarto render notebooks/NOTEBOOK_NAME.ipynb --to pdf \
  -M keep-tex:true \
  -o NOTEBOOK_NAME.pdf \
  --output-dir downloads/

# LaTeX-Datei in downloads/ verschieben
mv notebooks/NOTEBOOK_NAME.tex downloads/

# Aufräumen
rm -rf notebooks/NOTEBOOK_NAME_files
rm -rf downloads/_site downloads/index.html downloads/robots.txt downloads/sitemap.xml downloads/notebooks
```

::: {.callout-tip}
## Voraussetzungen
- Notebook muss **vollständig ausgeführt** sein
- TinyTeX installieren: `quarto install tinytex`
:::

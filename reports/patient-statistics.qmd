---
title: "Patientenstatistik Q4/2024"
author: "PRECISION Team"
date: 2024-12-22
description: "Quartalsweise Übersicht der Patientenstatistiken"
categories: [Statistik, Quartalsbericht]
format:
  html:
    code-fold: true
execute:
  warning: false
  message: false
---

::: {.download-buttons}
**Download:** [PDF](../downloads/patient-statistics.pdf){.btn .btn-primary} [DOCX](../downloads/patient-statistics.docx){.btn .btn-secondary}
:::

## Executive Summary

::: {.precision-highlight}
**Quartalsbericht Q4/2024**

- Gesamtpatienten: 200
- Neue Einschlüsse: 45
- Response-Rate: 65%
- Studienfortschritt: 78%
:::

## Rekrutierungsübersicht

```{python}
#| label: setup
#| code-fold: true

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt

COLORS = {
    'primary': '#1a365d',
    'accent': '#3182ce',
    'success': '#38a169',
    'warning': '#d69e2e'
}

plt.style.use('seaborn-v0_8-whitegrid')
np.random.seed(42)
```

```{python}
#| label: fig-recruitment
#| fig-cap: "Kumulierte Patientenrekrutierung 2024"

# Simulierte Rekrutierungsdaten
months = ['Jan', 'Feb', 'Mär', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez']
recruited = [12, 18, 22, 15, 20, 25, 18, 22, 16, 15, 10, 7]
cumulative = np.cumsum(recruited)

fig, ax1 = plt.subplots(figsize=(12, 5))

# Balken für monatliche Rekrutierung
bars = ax1.bar(months, recruited, color=COLORS['accent'], alpha=0.7, label='Monatlich')
ax1.set_xlabel('Monat')
ax1.set_ylabel('Neue Patienten', color=COLORS['accent'])
ax1.tick_params(axis='y', labelcolor=COLORS['accent'])

# Linie für kumuliert
ax2 = ax1.twinx()
ax2.plot(months, cumulative, color=COLORS['primary'], linewidth=3, marker='o',
         markersize=8, label='Kumuliert')
ax2.set_ylabel('Kumuliert', color=COLORS['primary'])
ax2.tick_params(axis='y', labelcolor=COLORS['primary'])

# Zielinie
ax2.axhline(y=200, color=COLORS['success'], linestyle='--', linewidth=2,
            label='Ziel: 200')

ax1.set_title('Patientenrekrutierung 2024', fontsize=14, fontweight='bold')

# Combined legend
lines1, labels1 = ax1.get_legend_handles_labels()
lines2, labels2 = ax2.get_legend_handles_labels()
ax1.legend(lines1 + lines2, labels1 + labels2, loc='upper left')

plt.tight_layout()
plt.show()
```

## Zentrenübersicht

```{python}
#| label: tbl-centers
#| tbl-cap: "Rekrutierung nach Studienzentrum"

centers_data = {
    'Zentrum': ['Universitätsklinikum A', 'Klinikum B', 'Praxis C', 'Forschungszentrum D'],
    'Rekrutiert': [78, 52, 45, 25],
    'Ziel': [80, 50, 50, 30],
    'Status': ['95%', '104%', '90%', '83%']
}

df_centers = pd.DataFrame(centers_data)
df_centers['Differenz'] = df_centers['Rekrutiert'] - df_centers['Ziel']
df_centers
```

```{python}
#| label: fig-centers
#| fig-cap: "Zielerreichung nach Studienzentrum"

fig, ax = plt.subplots(figsize=(10, 5))

x = np.arange(len(df_centers))
width = 0.35

bars1 = ax.bar(x - width/2, df_centers['Ziel'], width, label='Ziel',
               color=COLORS['primary'], alpha=0.5)
bars2 = ax.bar(x + width/2, df_centers['Rekrutiert'], width, label='Rekrutiert',
               color=COLORS['success'], alpha=0.8)

ax.set_ylabel('Anzahl Patienten')
ax.set_title('Zielerreichung nach Studienzentrum')
ax.set_xticks(x)
ax.set_xticklabels(['Uni A', 'Klinik B', 'Praxis C', 'FZ D'])
ax.legend()

# Werte auf Balken
for bar in bars2:
    height = bar.get_height()
    ax.text(bar.get_x() + bar.get_width()/2., height + 1,
            f'{int(height)}', ha='center', fontweight='bold')

plt.tight_layout()
plt.show()
```

## Demografische Verteilung

```{python}
#| label: fig-demographics
#| fig-cap: "Demografische Verteilung der Studienpopulation"

# Simulierte Daten
n = 200
ages = np.random.normal(55, 15, n).clip(18, 90)
genders = np.random.choice(['Männlich', 'Weiblich'], n, p=[0.52, 0.48])

fig, axes = plt.subplots(1, 2, figsize=(12, 4))

# Alters-Pyramide (vereinfacht als Histogramm)
axes[0].hist(ages, bins=15, color=COLORS['primary'], alpha=0.8, edgecolor='white')
axes[0].axvline(np.mean(ages), color=COLORS['warning'], linestyle='--', linewidth=2,
                label=f'MW: {np.mean(ages):.1f}')
axes[0].set_xlabel('Alter (Jahre)')
axes[0].set_ylabel('Anzahl')
axes[0].set_title('Altersverteilung')
axes[0].legend()

# Geschlecht
gender_counts = pd.Series(genders).value_counts()
axes[1].pie(gender_counts.values, labels=gender_counts.index, autopct='%1.1f%%',
            colors=[COLORS['primary'], COLORS['accent']], startangle=90)
axes[1].set_title('Geschlechterverteilung')

plt.tight_layout()
plt.show()
```

## Studienfortschritt

::: {.grid}

::: {.g-col-3}
::: {.stat-box}
[200]{.stat-value}
[Rekrutiert]{.stat-label}
:::
:::

::: {.g-col-3}
::: {.stat-box}
[185]{.stat-value}
[Aktiv]{.stat-label}
:::
:::

::: {.g-col-3}
::: {.stat-box}
[15]{.stat-value}
[Abgeschlossen]{.stat-label}
:::
:::

::: {.g-col-3}
::: {.stat-box}
[78%]{.stat-value}
[Fortschritt]{.stat-label}
:::
:::

:::

## Adverse Events

```{python}
#| label: tbl-ae
#| tbl-cap: "Übersicht Adverse Events"

ae_data = {
    'Kategorie': ['Leicht', 'Moderat', 'Schwer', 'SAE'],
    'Anzahl': [45, 12, 3, 1],
    'Anteil': ['73.8%', '19.7%', '4.9%', '1.6%'],
    'Behandlungsbezogen': [15, 5, 1, 0]
}

pd.DataFrame(ae_data)
```

## Nächste Schritte

::: {.callout-note}
## Geplante Aktivitäten Q1/2025

1. Interim-Analyse bei n=150
2. DSMB-Meeting: Januar 2025
3. Rekrutierungsabschluss: März 2025
4. Primärer Endpunkt: Juni 2025
:::

---

```{python}
#| echo: false
from datetime import datetime
print(f"*Bericht generiert am: {datetime.now().strftime('%d.%m.%Y %H:%M')}*")
```
